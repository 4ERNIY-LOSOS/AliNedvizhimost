<UserControl x:Class="AliNedvizhimostApp.Views.ProfileView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:AliNedvizhimostApp.Views"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Background="#F0F2F5">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="Профиль пользователя" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
                <Button Grid.Column="1" Content="&lt; Назад ко всем объявлениям" Command="{Binding GoBackCommand}" HorizontalAlignment="Right"/>
            </Grid>
            
            <!-- User Info -->
            <Border Background="White" CornerRadius="5" Padding="20" Margin="0,20,0,20">
                <StackPanel>
                    <TextBlock Text="{Binding CurrentUser.FirstName, StringFormat='Имя: {0}'}" FontSize="16" Margin="0,0,0,5"/>
                    <TextBlock Text="{Binding CurrentUser.LastName, StringFormat='Фамилия: {0}'}" FontSize="16" Margin="0,0,0,5"/>
                    <TextBlock Text="{Binding CurrentUser.Email, StringFormat='Email: {0}'}" FontSize="16"/>
                </StackPanel>
            </Border>

            <!-- Active Properties -->
            <TextBlock Text="Активные объявления" FontSize="22" FontWeight="SemiBold" Margin="0,0,0,10"/>
            <ItemsControl ItemsSource="{Binding ActiveProperties}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White" CornerRadius="5" Padding="15" Margin="0,0,0,15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Text="{Binding Address}" Foreground="Gray" Margin="0,5,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                    <Button Content="Редактировать" Command="{Binding DataContext.EditPropertyCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" CommandParameter="{Binding}" Margin="0,0,10,0"/>
                                    <Button Content="Закрыть" Command="{Binding DataContext.ClosePropertyCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" CommandParameter="{Binding}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Closed Properties -->
            <TextBlock Text="Закрытые объявления" FontSize="22" FontWeight="SemiBold" Margin="0,20,0,10"/>
            <ItemsControl ItemsSource="{Binding ClosedProperties}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#EAEAEA" CornerRadius="5" Padding="15" Margin="0,0,0,15">
                            <StackPanel>
                                <TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16" Foreground="Gray"/>
                                <TextBlock Text="{Binding Address}" Foreground="Gray" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

        </StackPanel>
    </ScrollViewer>
</UserControl>
